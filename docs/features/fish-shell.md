# Fish Shell Support

**Status:** Proposed

## Overview

Extend shell integration to support Fish shell, following the same pattern as bash and zsh.

## Proposed Interface

```bash
# In ~/.config/fish/config.fish
diaryctl init fish | source
```

## Implementation

### Init Script

```fish
# Generated by `diaryctl init fish`
function __diaryctl_prompt_hook
    eval (command diaryctl status --env 2>/dev/null)
end

function diaryctl_prompt_info
    command diaryctl status 2>/dev/null
end

# Register hook
function __diaryctl_install --on-event fish_prompt
    __diaryctl_prompt_hook
end

# Completions
diaryctl completion fish | source
```

### Cache Integration

Fish uses the same cache file (`~/.diaryctl/.prompt-cache`) as bash/zsh.

## Configuration

Same `config.toml` options apply:

```toml
[shell]
cache_ttl = "5m"
today_icon = "âœ“"
no_today_icon = "âœ—"
streak_icon = "ðŸ”¥"
show_context = true
```

## Prompt Integration

### Default Fish Prompt

```fish
# ~/.config/fish/config.fish
function fish_prompt
    set -l diary (diaryctl_prompt_info)
    if test -n "$diary"
        echo -n "[$diary] "
    end
    echo -n (prompt_pwd) " > "
end
```

### Starship

Starship has built-in Fish support. Use the same configuration as bash/zsh:

```toml
[custom.diaryctl]
command = "diaryctl status"
when = "command -v diaryctl"
format = "[$output]($style) "
```

## Files to Create

- `internal/shell/init_fish.go` â€” Fish init script template

## Implementation Notes

Fish differences from bash/zsh:
- No `PROMPT_COMMAND` or `precmd_functions`
- Uses `fish_prompt` event
- Different function syntax
- No `eval` in the same way â€” use `(command | psclip)` or `source`

---

*This is a proposed feature. No design document exists yet.*
